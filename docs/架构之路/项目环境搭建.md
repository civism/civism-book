# 项目演进



1. 项目环境：

   >client 层
   >
   >> api包（open包）：rpc的接口包
   >>
   >> entity包：实体类包
   >>
   >> >dto包：DTO传输包
   >> >
   >> >query包：DTO查询包
   >>
   >>constant包: 常量包
   >
   >common 层: 公用层
   >
   >dao 层 ：
   >
   >>dao包：
   >>
   >>entity包：
   >>
   >>> do包：DO实体类 
   >>>
   >>> query包：do查询实体类
   >
   >service 层 ：业务层
   >
   >> base包：数据库实体操作一一对应
   >>
   >> manager包：业务需要的包，不允许在该层调用dao方法，只能调用base中的service方法
   >>
   >> api包（open包）：rpc接口包
   >>
   >> entity包：
   >>
   >> > bo 包：bo实体类
   >> >
   >> > query包：参数查询包
   >>
   >> mq包：**可以没有**
   >>
   >> redis包：**可以没有**
   >
   >web 层： 视图层
   >
   >> controller包：
   >>
   >> aop包：**可以没有**
   >>
   >> filter包：**可以没有**
   >>
   >> entity包：
   >>
   >> 	> vo包：
   >> 	>
   >> 	> query包：查询包  **可以没有**
   >>
   >> 

2. 项目继承关系：

   如果有全公司的common 则client 和common都需要继承

* client层独立
*  common->dao->client + service->web

3. 为服务 划分为2中，一种是任务型的微服务，另一种是web的微服务

   * 任务型微服务

     * 只专注任务，并提供一下查询接口，通常不需要容器，直接main方法可以启动

   * web型微服务

     * 既提供web层接口，又提供微服务，需要依赖容器，启动项目 如tomcat

     

## 观点

> 作者开发中，负责了很多项目环境搭建，也看到过很多项目搭建的方式，讲实话，各自都有一定的道理，我也抱着学习和理解的心态应对着这样的项目环境，但是开发，无非讲究2个观点，一个是爽，一个是规范，即在规范的开发中寻求爽的感觉。所以我认为一个好的项目环境，应该满足这2个条件。

## 项目环境建议

* nginx规则转发web

  > 如果有web的层的需求，我认为一定是自己提供web层接口，因为是前后端完全分离的，可能一个产品需要n多个服务来支撑，统统定义nginx转发规则，根据前端请求路径转发到不同的web层的微服务中，这是目前我认为一个快速开发的项目环境建议，适合很多初创型或者中型公司吧，大公司我没去过 不发表意见
  >
  > **优点**
  >
  > 1. 开发排查问题迅速
  > 2. 多人开发冲突少
  > 3. 可以提供公共接口，维护升级快速，能统一规范
  >
  > **缺点**
  >
  > 	1. 可能返回过多的前端不需要字段
  >  	2. 权限控制难，不集中
  >
  > 

* client集中web

  > 一个产品 有自己独立的web 层，然后由多个client即rpc接口组合层的业务。
  >
  > **优点**
  >
  > 1. 权限空间简单
  > 2. 能过滤掉多余字段
  >
  > **缺点** 
  >
  > 	1. 接口view层重复开发
  >  	2. 代码冲突增加
  >  	3. 维护成本增加

两种项目选择，最主要的还是在权限方便 跟沉余字段，各有优势，如果没权限要求，如商城等，快速开发到建议nginx转发这种方式。